APK = Android Package Kit

Single file containing EVERYTHING to install an app

APK is actually a ZIP file with .apk extension

#### APK File Structure
```
app.apk (ZIP file)
│
├── AndroidManifest.xml      → App's ID card
│
├── classes.dex              → Compiled code
├── classes2.dex             → More code (if large app)
│
├── resources.arsc           → Compiled resources
│
├── res/                     → Resource files
│   ├── layout/              → UI designs
│   ├── drawable/            → Images
│   ├── values/              → Strings, colors
│   ├── xml/                 → Config files
│   └── raw/                 → Raw files
│
├── assets/                  → Uncompiled assets
│
├── lib/                     → Native libraries
│   ├── armeabi-v7a/         → ARM 32-bit
│   ├── arm64-v8a/           → ARM 64-bit
│   └── x86_64/              → Intel 64-bit
│
├── META-INF/                → Signature files
│   ├── MANIFEST.MF
│   ├── CERT.SF
│   └── CERT.RSA
│
└── kotlin/                  → Kotlin metadata (if Kotlin app)
```

#### 1. AndroidManifest.xml
```
PURPOSE: App's configuration and identity

Contains:
├── Package name (com.example.app)
├── Permissions required
├── App components (activities, services, etc.)
├── Minimum SDK version
├── Security settings
└── Intent filters

```

#### 2. classes.dex
```
PURPOSE: Contains all app's executable code

DEX = Dalvik Executable

Compiled from:
Java/Kotlin Source → .class files → .dex file
```

##### Multidex:
```
If app is large (>65,536 methods):

classes.dex      → Main code
classes2.dex     → Additional code
classes3.dex     → More code
...

Need to analyze ALL dex files!
```

#### 3. resources.arsc
```
PURPOSE: Compiled resources table

Binary file containing:
├── String translations
├── Dimension values
├── Color definitions
├── Resource ID mappings
└── Configuration data
```

#### 4. res/ Folder
```
PURPOSE: Resource files (layouts, images, values)

res/
├── layout/                  → UI screen designs
│   ├── activity_main.xml
│   └── activity_login.xml
│
├── drawable/                → Images
│   ├── icon.png
│   ├── logo.png
│   └── background.xml
│
├── values/                  → Value definitions
│   ├── strings.xml          → Text strings
│   ├── colors.xml           → Colors
│   ├── styles.xml           → UI styles
│   └── arrays.xml           → Arrays
│
├── xml/                     → Configuration XML
│   ├── network_security_config.xml
│   └── file_paths.xml
│
├── raw/                     → Raw files (audio, etc.)
│
└── mipmap/                  → App icons
```

#### 5. assets/ Folder
```
PURPOSE: Raw files accessed by filename (not compiled)

assets/
├── fonts/
│   └── custom_font.ttf
├── data/
│   └── config.json
├── www/                     → WebView HTML files
│   ├── index.html
│   └── app.js
└── database.db              → Pre-populated database
```

#### 6. lib/ Folder
```
PURPOSE: Native libraries (C/C++ code compiled)

lib/
├── armeabi-v7a/             → ARM 32-bit
│   ├── libnative.so
│   └── libcrypto.so
│
├── arm64-v8a/               → ARM 64-bit (most modern phones)
│   ├── libnative.so
│   └── libcrypto.so
│
├── x86/                     → Intel 32-bit
│
└── x86_64/                  → Intel 64-bit (emulators)
```

#### 7. META-INF/ Folder
```
PURPOSE: APK signature and verification

META-INF/
├── MANIFEST.MF              → Hash of every file
├── CERT.SF                  → Signed version of MANIFEST.MF
└── CERT.RSA (or .DSA/.EC)   → Certificate + Signature
```


## Extracting APK Contents
#### 1: Simple Unzip
#### 2: APKTool (Recommended)

#### 3: JADX (Best for Code)

```
┌─────────────────────────────────────────────────────────────┐
│              EXTRACTION TOOLS                               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  unzip                                                      │
│  └── Quick extraction                                       │
│  └── Binary XML (not readable)                              │
│  └── No code decompilation                                  │
│                                                             │
│  APKTool                                                    │
│  └── Decoded resources                                      │
│  └── Smali code (hard to read)                              │
│  └── Can rebuild APK                                        │
│                                                             │
│  JADX                                                       │
│  └── Java source code                                       │
│  └── Readable resources                                     │
│  └── Cannot rebuild                                         │
│                                                             │
│  Best approach: Use JADX for reading, APKTool for modifying │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```



## A DEX file = Dalvik Executable file.
It contains the compiled code of an Android application in a format that the Dalvik Virtual Machine (DVM) or ART (Android Runtime) can run.
When developers write code in:

Java 
Kotlin 
…it is compiled into .class files
→ then all the .class files are combined and converted into classes.dex.
Most apps have:

classes.dex  
Sometimes classes2.dex, classes3.dex (if the app is large)  


 ⭐ Why DEX Files Are Important?
1. They contain the app’s entire logic
All functions, classes, encryption logic, API calls, login flow, everything.
2. They allow reverse engineering
Tools like:

JADX 
apktool 
MobSF 
JEB 
…can convert .dex → readable Java/Smali.
3. For pentesting, DEX is the main attack surface
You inspect DEX files to find:

API keys 
Hardcoded secrets 
Vulnerable logic 
Authentication flaws 
Debug logs 
Hardcoded URLs 
Root detection logic 
SSL pinning code 
