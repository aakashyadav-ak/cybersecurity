
# Protocol
- A protocol is a set of RULES that defines how data is transmitted and received.
- A protocol is a standardized set of rules, procedures, and formats that govern how data is transmitted, received, and interpreted between devices on a network.

==The "protocol number" is a value stored in the header of an IP packet (at Layer 3). Its job is to tell the receiving computer's operating system what kind of data is inside the packet so it can hand it off to the correct program or service (at Layer 4).==

**The Protocol field in the IPv4 header is 8 bits long.**

**Purpose:** They allow different devices to communicate seamlessly, regardless of manufacturer.
**Key Functions:** Protocols manage data formatting, routing, error detection, and correction (e.g., re-sending lost data).

#### Need:
When an IP packet arrives, the computer asks: "Should I hand this to TCP? UDP? ICMP? Something else?"
The Protocol Number answers this question.
### IP Protocol Numbers
0-255

**Common Protocol Numbers:**

| Protocol Number | Protocol Name | Full Name                         | Purpose                                           |
| :-------------: | :------------ | :-------------------------------- | :------------------------------------------------ |
|        1        | ICMP          | Internet Control Message Protocol | Network diagnostics (ping, traceroute)            |
|        6        | TCP           | Transmission Control Protocol     | Reliable, ordered delivery (web, email)           |
|       17        | UDP           | User Datagram Protocol            | Fast, connectionless delivery (streaming, gaming) |
|       41        | IPv6          | IPv6 Encapsulation                | Tunneling IPv6 over IPv4                          |
|       47        | GRE           | Generic Routing Encapsulation     | VPN tunneling                                     |
|       50        | ESP           | Encapsulating Security Payload    | IPsec encryption                                  |
|       51        | AH            | Authentication Header             | IPsec authentication                              |
|       89        | OSPF          | Open Shortest Path First          | Routing protocol                                  |
**example:**
```
HTTP Protocol Rules:
├── Use GET to request data
├── Use POST to send data
├── Response codes (200 OK, 404 Not Found)
└── Header format specifications
```

#### Elements of Protocol
1. Syntax = The Type of data we transfer over Network
   Structure and Format of the Data, means  the order in which they are presented.
   ex= First 8 bit= Address of sender 
      Second 8 bit = Address of Receiver.
2. Semantics= Define Bit conversion.
3. Timing= How fast it can be sent. 
   ex= If we can send data at 100/mbps but receiver can receive at 1/mbps then some data will be lost
# PORT (Work at Transport Layer)
A port is a virtual point where network connections start and end. Ports are software-based and managed by a computer's operating system. Each port is associated with a specific process or service. Ports allow computers to easily differentiate between different kinds of traffic: emails go to a different port than webpages, for instance, even though both reach a computer over the same Internet connection.

A port is a 16-bit logical identifier that directs traffic to a specific application or service on a host.
## Port No.
Ports are standardized across all network-connected devices, with each port assigned a number. Most ports are reserved for certain protocols — for example, all Hypertext Transfer Protocol (HTTP) messages go to port 80. While IP addresses enable messages to go to and from specific devices, port numbers allow targeting of specific services or applications within those devices.

==Port numbers only exist within TCP (Protocol 6) and UDP (Protocol 17)==

==ICMP, OSPF, and other protocols do NOT use port numbers.==

### Port Ranges

**0-65535**

| Range         | Name                  | Purpose                                                                                               | Examples                                        |
| :------------ | :-------------------- | :---------------------------------------------------------------------------------------------------- | :---------------------------------------------- |
| 0 - 1023      | Well-Known Ports      | Reserved for standard services.<br>Defined by IANA & does't have charge                               | HTTP (80), SSH (22)                             |
| 1024 - 49151  | Registered Ports      | Assigned to specific applications<br>special services ,<br>has to be registered globally by IANA <br> | MySQL (3306), RDP (3389) <br>ex= Apple to Apple |
| 49152 - 65535 | Dynamic/Private Ports | Temporary client-side ports<br>used as source Port no.                                                | Random ephemeral ports                          |

## Working
```
┌─────────────────────────────────────────────────────────┐
│                    IP PACKET                            │
│  ┌───────────────────────────────────────────────────┐  │
│  │  IP Header                                        │  │
│  │  • Source IP Address                              │  │
│  │  • Destination IP Address                         │  │
│  │  • PROTOCOL NUMBER (e.g., 6 for TCP)  ◄───────────│──│── Decides TCP/UDP/ICMP
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │  TCP/UDP Header                                   │  │
│  │  • Source PORT NUMBER (e.g., 52431)  ◄────────────│──│── Client's temporary port
│  │  • Destination PORT NUMBER (e.g., 443) ◄──────────│──│── Server's service port
│  └───────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────┐  │
│  │  DATA (Application Layer)                         │  │
│  │  • HTTP Request, Email content, etc.              │  │
│  └───────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────┘
```

## Protocol Number vs. Port Number
```
PROTOCOL NUMBER                    PORT NUMBER
(Which delivery truck?)            (Which apartment?)
        │                                 │
        ▼                                 ▼
┌───────────────┐                ┌─────────────────┐
│  IP Header    │                │  TCP/UDP Header │
│               │                │                 │
│  Protocol: 6  │───► TCP ───►  │  Port: 80       │──► HTTP (Web)
│  Protocol: 6  │───► TCP ───►  │  Port: 443      │──► HTTPS (Secure Web)
│  Protocol: 6  │───► TCP ───►  │  Port: 22       │──► SSH
│  Protocol: 17 │───► UDP ───►  │  Port: 53       │──► DNS
│  Protocol: 17 │───► UDP ───►  │  Port: 123      │──► NTP
│  Protocol: 1  │───► ICMP      │  (No Ports!)    │──► Ping
└───────────────┘                └─────────────────┘
```

| Feature | Protocol Number | Port Number |
| :--- | :--- | :--- |
| **Location** | IP Header | TCP/UDP Header |
| **Size** | 8 bits | 16 bits |
| **Range** | 0 - 255 | 0 - 65535 |
| **Purpose** | Identify transport protocol | Identify application/service |
| **Question Answered** | "TCP or UDP or ICMP?" | "Which app gets this?" |
| **Examples** | 6=TCP, 17=UDP, 1=ICMP | 80=HTTP, 443=HTTPS, 22=SSH |

# Essential Ports for Cybersecurity

##  Critical Ports to Know

| Port | Protocol    | Full Form                                        | TCP/UDP | Description                                 |
| ---- | ----------- | ------------------------------------------------ | ------- | ------------------------------------------- |
| 20   | FTP Data    | File Transfer Protocol (Data)                    | TCP     | Transfers actual file data                  |
| 21   | FTP Control | File Transfer Protocol (Control)                 | TCP     | Sends FTP commands and authentication       |
| 22   | SSH         | Secure Shell                                     | TCP     | Encrypted remote access and file transfer   |
| 23   | Telnet      | Teletype Network                                 | TCP     | Unencrypted remote access                   |
| 25   | SMTP        | Simple Mail Transfer Protocol                    | TCP     | Sends outgoing emails                       |
| 53   | DNS         | Domain Name System                               | Both    | Resolves domain names to IP addresses       |
| 67   | DHCP Server | Dynamic Host Configuration Protocol              | UDP     | Assigns IP addresses to clients             |
| 68   | DHCP Client | Dynamic Host Configuration Protocol              | UDP     | Receives IP configuration from server       |
| 69   | TFTP        | Trivial File Transfer Protocol                   | UDP     | Simple file transfer without authentication |
| 80   | HTTP        | Hypertext Transfer Protocol                      | TCP     | Unencrypted web traffic                     |
| 110  | POP3        | Post Office Protocol Version 3                   | TCP     | Downloads emails from server                |
| 123  | NTP         | Network Time Protocol                            | UDP     | Synchronizes time across devices            |
| 135  | MS-RPC      | Microsoft Remote Procedure Call                  | TCP     | Windows remote procedure calls              |
| 137  | NetBIOS-NS  | Network Basic Input Output System - Name Service | UDP     | Windows name resolution                     |
| 138  | NetBIOS-DGM | Network Basic Input Output System - Datagram     | UDP     | Windows connectionless messaging            |
| 139  | NetBIOS-SSN | Network Basic Input Output System - Session      | TCP     | Windows connection-oriented file sharing    |
| 143  | IMAP        | Internet Message Access Protocol                 | TCP     | Accesses emails on server                   |
| 161  | SNMP        | Simple Network Management Protocol               | UDP     | Monitors and manages network devices        |
| 162  | SNMP Trap   | Simple Network Management Protocol Trap          | UDP     | Receives alerts from network devices        |
| 389  | LDAP        | Lightweight Directory Access Protocol            | Both    | Accesses directory services                 |
| 443  | HTTPS       | Hypertext Transfer Protocol Secure               | TCP     | Encrypted web traffic                       |
| 445  | SMB         | Server Message Block                             | TCP     | Windows file and printer sharing            |
| 514  | Syslog      | System Logging Protocol                          | UDP     | Collects system log messages                |
| 636  | LDAPS       | Lightweight Directory Access Protocol Secure     | TCP     | Encrypted directory services                |
| 993  | IMAPS       | Internet Message Access Protocol Secure          | TCP     | Encrypted email access                      |
| 995  | POP3S       | Post Office Protocol Version 3 Secure            | TCP     | Encrypted email download                    |
| 1433 | MSSQL       | Microsoft Structured Query Language              | TCP     | Microsoft SQL database communication        |
| 1521 | Oracle      | Oracle Database                                  | TCP     | Oracle database communication               |
| 3306 | MySQL       | My Structured Query Language                     | TCP     | MySQL database communication                |
| 3389 | RDP         | Remote Desktop Protocol                          | TCP     | Windows remote desktop access               |
| 5432 | PostgreSQL  | PostgreSQL Database                              | TCP     | PostgreSQL database communication           |
| 5900 | VNC         | Virtual Network Computing                        | TCP     | Virtual network computing remote access     |
| 5985 | WinRM       | Windows Remote Management (HTTP)                 | TCP     | Windows remote management                   |
| 5986 | WinRM       | Windows Remote Management (HTTPS)                | TCP     | Encrypted Windows remote management         |
| 6379 | Redis       | Remote Dictionary Server                         | TCP     | Redis in-memory database                    |
| 8080 | HTTP Proxy  | Hypertext Transfer Protocol Proxy                | TCP     | Alternative HTTP or proxy server            |

## Secure vs Insecure Ports

| Insecure | Port | Secure Alternative | Port |
|----------|------|--------------------|------|
| Telnet | 23 | SSH | 22 |
| HTTP | 80 | HTTPS | 443 |
| FTP | 21 | SFTP/FTPS | 22/990 |
| POP3 | 110 | POP3S | 995 |
| IMAP | 143 | IMAPS | 993 |
| LDAP | 389 | LDAPS | 636 |


