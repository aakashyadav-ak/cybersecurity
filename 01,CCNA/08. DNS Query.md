# DNS 
DNS (Domain Name System) is like the phonebook of the internet. It converts human-readable names (like google.com) into IP addresses (like 142.250.192.46) that computers understand.

```
+------------------------------------------------+
|                                                |
|   DNS = Layer 7 Protocol                       |
|                                                |
|   Uses Layer 4 (UDP/TCP) for transport         |
|   Uses Port 53                                 |
|                                                |
|   Why UDP?                                     |
|   - Fast (no handshake)                        |
|   - DNS queries are small                      |
|   - Connectionless                             |
|                                                |
|   When TCP?                                    |
|   - Large responses                            |
|   - Zone transfers                             |
|   - Encrypted DNS (DoT/DoH)                    |
|                                                |
+------------------------------------------------+
```
## DNS Components

#### 1. Domain Name Structure
```
www.example.com.
 │     │     │  │
 │     │     │  └── Root Domain (invisible dot)
 │     │     └───── TLD (Top Level Domain)
 │     └─────────── SLD (Second Level Domain)
 └──────────────── Subdomain
```

| Component | Full Form                   | Example          | Purpose                               |
|-----------|-----------------------------|------------------|---------------------------------------|
| Root      | Root Domain                 | . (dot)          | Starting point of all DNS lookups     |
| TLD       | Top Level Domain            | .com, .org, .in  | Categories domains by type/country    |
| SLD       | Second Level Domain         | google, amazon   | Your actual website name              |
| Subdomain | Subdomain                   | www, mail, blog  | Divisions within your domain          |
| FQDN      | Fully Qualified Domain Name | www.google.com.  | Complete domain path                  |

#### 2. DNS Servers
```
+------------------+----------------------------------------+
|    Server Type   |              What it Does              |
+------------------+----------------------------------------+
| Stub Resolver    | Your computer's DNS client             |
| Recursive Resolver| Does all the hard work (ISP/Google)   |
| Root Server      | Knows where all TLDs are               |
| TLD Server       | Knows where domain servers are         |
| Authoritative    | Has the actual IP address answer       |
+------------------+----------------------------------------+
```

## DNS Query Flow

 **User types www.google.com in browser:**
```
    USER                        INTERNET
      │
      │  Step 1: "What is IP of www.google.com?"
      ▼
+─────────────+
│  Browser   │
│  (Client)  │
+─────────────+
      │
      │  Step 2: Check local cache
      ▼
+─────────────+
│  OS Cache  │──── Found? ──── YES ──→ Return IP (Done!)
+─────────────+
      │ NO
      │  Step 3: Ask Recursive Resolver
      ▼
+─────────────────────+
│  Recursive Resolver │  (Your ISP or 8.8.8.8)
│    (Does the work)  │
+─────────────────────+
      │
      │  Step 4: Ask Root Server "Where is .com?"
      ▼
+─────────────+
│ Root Server │ ──→ "Go ask TLD server at x.x.x.x"
│     (.)     │
+─────────────+
      │
      │  Step 5: Ask TLD Server "Where is google.com?"
      ▼
+─────────────+
│ TLD Server  │ ──→ "Go ask Google's server at y.y.y.y"
│   (.com)    │
+─────────────+
      │
      │  Step 6: Ask Authoritative Server "What is www.google.com?"
      ▼
+───────────────────+
│ Authoritative     │ ──→ "The IP is 142.250.192.46"
│ Server (Google)   │
+───────────────────+
      │
      │  Step 7: Return answer to user
      ▼
+─────────────+
│   Browser   │ ──→ Connects to 142.250.192.46
+─────────────+
```

```
+--------+      +----------+      +------+      +------+      +--------+
| Client |      | Resolver |      | Root |      | TLD  |      |  Auth  |
+--------+      +----------+      +------+      +------+      +--------+
    │                │               │             │              │
    │ ──── Q1 ────>  │               │             │              │
    │                │ ──── Q2 ────> │             │              │
    │                │ <─── A2 ───── │             │              │
    │                │                             │              │
    │                │ ─────────── Q3 ───────────> │              │
    │                │ <────────── A3 ──────────── │              │
    │                │                                            │
    │                │ ──────────────── Q4 ─────────────────────> │
    │                │ <─────────────── A4 ────────────────────── │
    │                │                                            │
    │ <─── A1 ─────  │                                            │
    │                                                             │
    
Q = Query (Question)
A = Answer (Response)
```

## Types of TLDs
#### 1. Generic TLDs (gTLD)
```
.com  ──→ Commercial
.org  ──→ Organizations
.net  ──→ Network
.edu  ──→ Education
.gov  ──→ Government
```

#### 2. Country Code TLDs (ccTLD)
```
.in   ──→ India
.uk   ──→ United Kingdom
.jp   ──→ Japan
.au   ──→ Australia
.ca   ──→ Canada
```

#### 3. New TLDs
```
.blog, .shop, .app, .dev, .io
```

## DNS Record Types

| Record | Purpose                 | Example                       |
| ------ | ----------------------- | ----------------------------- |
| A      | Domain to IPv4          | google.com → 142.250.192.46   |
| AAAA   | Domain to IPv6          | google.com → 2607:f8b0:4004:: |
| CNAME  | Alias to another domain | www.google.com → google.com   |
| MX     | Mail server             | google.com → mail.google.com  |
| NS     | Name server             | google.com → ns1.google.com   |
| TXT    | Text information        | Used for verification         |

## example:
```
User types: www.amazon.in

Breaking it down:
┌─────────────────────────────────────┐
│  www    .    amazon    .    in      │
│   │           │             │       │
│ Subdomain    SLD          TLD       │
│              (Your name)  (India)   │
└─────────────────────────────────────┘

DNS Journey:
1. Root Server  → "Go to .in TLD server"
2. .in TLD      → "Go to Amazon's server"
3. Amazon Auth  → "IP is 52.95.120.67"
4. Browser      → Connects to Amazon!
```