A partition is a separate section of storage with its own filesystem.

```
Your Phone's 128GB Storage
├── /boot         → 64MB
├── /system       → 4GB
├── /vendor       → 1GB
├── /userdata     → 120GB
└── /recovery     → 64MB
```
Each partition is mounted separately and has different permissions.


## 1: System Partition:
```
System Partition Group
├── system       → Android OS files
├── boot         → Kernel + ramdisk
└── init_boot    → Generic ramdisk (Android 13+)
```
- Contains the core Android OS (AOSP)
- Houses system apps, framework, and core libraries
- Typically read-only in production devices
- Can be updated via OTA updates

| Property    | Details                           |
|-------------|-----------------------------------|
| Mount Point | /system                           |
| Contains    | Framework, system apps, libraries |
| Filesystem  | ext4 or erofs                     |

#### System:
```
# Structure
/system/
├── app/                 # System apps
├── priv-app/            # Privileged apps
├── framework/           # Android framework JARs
├── lib/                 # 32-bit libraries
├── lib64/               # 64-bit libraries
├── bin/                 # System binaries
└── etc/                 # Configuration files
```

#### Boot Partition:
```
boot.img
├── kernel           → Linux kernel (zImage/Image.gz)
├── ramdisk.img      → Initial root filesystem
└── dtb              → Device Tree Blob (hardware info)
```

| Property | Details          |
|----------|------------------|
| Contains | Kernel + Ramdisk |
| Format   | boot.img         |
| Size     | 32-128 MB        |
**Ramdisk Contains**
```
ramdisk/
├── init              → First process (PID 1)
├── init.rc           → Init scripts
├── default.prop      → Default properties
└── sepolicy          → SELinux policy
```

#### init_boot Partition (Android 13+):
```
boot.img
└── kernel only

init_boot.img
└── ramdisk only   ← Separated now
```

| Property   | Details                       |
|------------|-------------------------------|
| Introduced | Android 13 (GKI 2.0)          |
| Contains   | Generic ramdisk only          |
| Purpose    | Separates ramdisk from kernel |
Benefit:
```
Google can update kernel (boot.img)
without touching ramdisk (init_boot.img)

OEM can update ramdisk
without touching kernel
```

- **Android Framework:** The .jar files that run the logic of the OS (Activity Manager, Package Manager).
- **System Apps:** Calculator, Settings, Phone (Privileged apps).
- **Native Libraries:** Common shared libraries (libc.so, libssl.so).
- **APEX Modules:** (Important!) In modern Android, system components (like the Media Codecs or ADB) are packaged as .apex files here. They can be updated via Google Play without a full OS update.


### Boot Flow with These Partitions
```
Power ON
    ↓
Bootloader (reads boot partition)
    ↓
Loads Kernel from boot.img
    ↓
Loads Ramdisk from:
    ├── boot.img (Android 12 and below)
    └── init_boot.img (Android 13+)
    ↓
Executes /init
    ↓
Mounts /system partition
    ↓
Android starts
```
## 2. The Vendor Partition (/vendor):
Vendor partition contains hardware-specific code provided by chipset manufacturers like Qualcomm, MediaTek, Samsung Exynos.

- **HALs (Hardware Abstraction Layers):** Binaries that talk to the kernel drivers. In 2026, these strictly use AIDL (Android Interface Definition Language). The older HIDL standard is dead.
- **Proprietary Blobs:** Closed-source binaries from Qualcomm, MediaTek, or the OEM.
- **VNDK (Vendor Native Development Kit):** Libraries specifically allowing the Vendor partition to talk to the System partition without breaking compatibility.

HAL = Hardware Abstraction Layer
```
Android App
    ↓
Android Framework
    ↓
HAL (in /vendor)      ← Translates commands
    ↓
Hardware (Camera, GPS, Sensors)
```

#### Vendor

| Property    | Details                         |
| ----------- | ------------------------------- |
| Mount Point | /vendor                         |
| Contains    | HALs, vendor binaries, firmware |
| Filesystem  | ext4 or erofs                   |
| Created By  | Chipset manufacturer            |

Directory Structure:
```bash
/vendor/
├── bin/              # Vendor executables
├── lib/              # 32-bit vendor libraries
├── lib64/            # 64-bit vendor libraries
├── etc/              # Vendor configurations
├── firmware/         # Hardware firmware files
└── build.prop        # Vendor properties
```

####  Vendor_boot Partition
Vendor_boot contains vendor-specific ramdisk and kernel modules. Introduced with Project GKI (Generic Kernel Image).

| Property   | Details                                       |
| ---------- | --------------------------------------------- |
| Introduced | Android 11 (GKI 1.0)                          |
| Contains   | Vendor ramdisk, kernel modules                |
| Format     | vendor_boot.img                               |
| Purpose    | Separates vendor boot files from generic boot |
```
boot.img
├── kernel (Google's Generic Kernel)
└── ramdisk (Generic only)

vendor_boot.img
├── vendor ramdisk (Vendor specific)
└── kernel modules (.ko files)

Benefit: Google updates kernel independently
         Vendor updates their part independently
```

**Vendor_boot.img Structure**
```
vendor_boot.img
├── vendor_ramdisk/
│   ├── init.vendor.rc       # Vendor init scripts
│   ├── fstab.qcom           # Partition mount info
│   └── vendor configs
└── lib/modules/
    ├── wlan.ko              # WiFi driver module
    ├── camera.ko            # Camera driver module
    └── fingerprint.ko       # Fingerprint module
```

#### ODM Partition
ODM = Original Design Manufacturer

ODM partition contains device-specific customizations made by the company that builds the final device.

| Property    | Details                            |
| ----------- | ---------------------------------- |
| Mount Point | /odm                               |
| Contains    | Device-specific libraries, configs |
| Filesystem  | ext4 or erofs                      |
| Created By  | Device manufacturer                |

Vendor vs ODM
```
Qualcomm (Chipset Maker)
    ↓
Creates /vendor files
(Camera HAL, GPU drivers, etc.)
    ↓
Gives to Samsung/Xiaomi/OnePlus (ODM)
    ↓
They add customizations in /odm
(Tuned camera settings, device configs)
    ↓
Final device sold to you
```

Directory Structure:
```bash
/odm/
├── app/              # ODM-specific apps
├── lib/              # 32-bit ODM libraries
├── lib64/            # 64-bit ODM libraries
├── etc/              # ODM configurations
└── build.prop        # ODM properties
```

Flow
```
Phone boots
    ↓
boot.img loads (Generic Kernel)
    ↓
vendor_boot.img loads (Vendor ramdisk + modules)
    ↓
/vendor mounts (Qualcomm/MediaTek HALs)
    ↓
/odm mounts (Samsung/Xiaomi customizations)
    ↓
Hardware ready to use
```
## 3: Non-Upgradable Partition
These partitions are not updated via OTA (Over-The-Air updates). They store user data and runtime information.

```
OTA Update affects:
├── system       ✅ Updated
├── vendor       ✅ Updated
├── boot         ✅ Updated
└── userdata     ❌ Not touched

Non-upgradable partitions:
├── cache        → Temporary files
├── userdata     → Your personal data
└── metadata     → Encryption keys
```
- **ABL/XBL (Bootloaders):** The code that initializes the CPU and RAM before Android starts.
- **TrustZone / TEE (The Secure World):** This is a separate OS running alongside Android on the same CPU but isolated. It handles encryption keys, Biometrics, and DRM.
- **vbmeta: The Verified Boot metadata.** This ensures nobody has modified the partitions.

####  Cache Partition
Cache partition stores temporary system files and OTA update packages during installation.

| Property    | Details                                    |
|-------------|--------------------------------------------|
| Mount Point | /cache                                     |
| Contains    | OTA updates, temporary files, recovery logs|
| Filesystem  | ext4                                       |
| Size        | 256MB - 1GB                                |
| Wiped On    | Factory reset, cache wipe                  |
**Directory Structure**
```
/cache/
├── recovery/
│   ├── last_log           # Last recovery log
│   ├── last_kmsg          # Last kernel messages
│   └── command            # Recovery commands
├── dalvik-cache/          # Compiled app cache (older Android)
├── lost+found/            # Recovered files
└── update.zip             # OTA package (during update)
```

How Cache is Used
```
OTA Update Process:
    ↓
Download update.zip to /cache
    ↓
Reboot to recovery
    ↓
Recovery reads /cache/update.zip
    ↓
Applies update
    ↓
Deletes update.zip
```

#### Userdata Partition
Userdata partition stores all user data including apps, personal files, app databases, and settings.

| Property    | Details                               |
| ----------- | ------------------------------------- |
| Mount Point | /data                                 |
| Contains    | User apps, app data, media, settings  |
| Filesystem  | ext4 or f2fs                          |
| Size        | Largest partition (remaining storage) |
| Encryption  | Encrypted by default (Android 10+)    |
| Wiped On    | Factory reset                         |

Directory Structure:
```
/data/
├── data/                    # App private data
│   ├── com.whatsapp/
│   ├── com.instagram.android/
│   └── com.facebook.katana/
├── app/                     # Installed APKs
├── user/                    # Multi-user data
├── system/                  # System settings
├── media/                   # Internal storage
│   └── 0/
│       ├── DCIM/           # Photos
│       ├── Download/       # Downloads
│       └── WhatsApp/       # WhatsApp media
├── misc/                    # Miscellaneous data
└── local/                   # Local app data
```

==App Data Structure:==
```
/data/data/com.whatsapp/
├── databases/
│   ├── msgstore.db          # Chat messages
│   └── wa.db                # Contacts
├── shared_prefs/
│   └── preferences.xml      # App settings
├── files/                   # App files
├── cache/                   # App cache
└── lib/                     # Native libraries
```

**Encryption Types**
```
FDE (Full Disk Encryption) - Android 5-9
├── Entire /data encrypted
├── Single key for all data
└── Decrypt at boot with PIN/password

FBE (File Based Encryption) - Android 10+
├── Each file encrypted separately
├── CE (Credential Encrypted) - needs unlock
├── DE (Device Encrypted) - available at boot
└── More secure and flexible
```

#### Metadata Partition


## 4:Dynamic Partitions
Dynamic Partitions allow Android to resize partitions without fixed sizes. Introduced in Android 10.
```
Traditional (Fixed):
├── system     → 4GB (fixed)
├── vendor     → 1GB (fixed)
└── product    → 512MB (fixed)

Problem: Wasted space if partition not fully used

Dynamic:
├── super      → 8GB (container)
│   ├── system     → flexible size
│   ├── vendor     → flexible size
│   └── product    → flexible size

Benefit: Partitions share space dynamically
```

| Problem (Old Method)          | Solution (Dynamic)              |
| ----------------------------- | ------------------------------- |
| Fixed partition sizes         | Flexible sizes                  |
| Wasted unused space           | Space shared between partitions |
| Hard to add new partitions    | Easy to add/remove partitions   |
| OTA size limited by partition | OTA can resize partitions       |
## Persist Partition
Persist partition stores device-specific calibration data and settings that must survive factory resets and OTA updates.

```
Factory Reset:
├── userdata    → Wiped ❌
├── cache       → Wiped ❌
├── system      → Unchanged ✅
└── persist     → Unchanged ✅ (survives everything)
```

| Property               | Details                            |
|------------------------|------------------------------------|
| Mount Point            | /persist or /mnt/vendor/persist    |
| Contains               | Calibration data, DRM, sensor data |
| Filesystem             | ext4                               |
| Size                   | 8-64 MB                            |
| Survives Factory Reset | Yes                                |
| Survives OTA Update    | Yes                                |
| Encryption             | Not encrypted                      |

**Directory Structure**
```
/persist/
├── sensors/
│   ├── sensors_settings      # Sensor calibration
│   └── gyro_calibration      # Gyroscope data
├── bluetooth/
│   └── bt_mac                # Bluetooth MAC address
├── wifi/
│   └── wifi_mac              # WiFi MAC address
├── drm/
│   └── widevine/             # DRM certificates
├── data/
│   ├── sfs/                  # Secure filesystem
│   └── tz/                   # TrustZone data
├── audio/
│   └── audio_calibration     # Speaker/mic calibration
├── camera/
│   └── camera_calibration    # Camera tuning
└── time/
    └── ats_*                 # Time sync data
```


**Data Stored in Persist**:

| Data Type          | Description                     | Location            |
| ------------------ | ------------------------------- | ------------------- |
| Sensor Calibration | Gyroscope, accelerometer tuning | /persist/sensors/   |
| WiFi MAC           | Permanent WiFi address          | /persist/wifi/      |
| Bluetooth MAC      | Permanent BT address            | /persist/bluetooth/ |
| DRM Keys           | Widevine, PlayReady             | /persist/drm/       |
| Audio Calibration  | Speaker/mic tuning              | /persist/audio/     |
| Camera Calibration | Camera sensor tuning            | /persist/camera/    |
| TrustZone Data     | Secure enclave data             | /persist/data/tz/   |


**Why Persist Survives Factory Reset?**
```
Manufacturing Process:
    ↓
Device assembled
    ↓
Sensors calibrated in factory
    ↓
Calibration data written to /persist
    ↓
Device shipped to user
    ↓
User does factory reset
    ↓
/persist NOT wiped (calibration preserved)
    ↓
Device still works correctly

If /persist wiped:
├── Sensors give wrong readings
├── WiFi/BT MAC address lost
├── DRM stops working (no Netflix HD)
└── Camera colors incorrect
```

